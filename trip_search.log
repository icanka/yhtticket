2024-04-24 21:39:58,747 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:39:58,747 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:39:59,747 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:40:01,296 - trip - get_trips - INFO - No trips found.
2024-04-24 21:40:01,296 - trip - find_trip - ERROR - Error while finding trip: 'NoneType' object is not iterable
2024-04-24 21:43:18,987 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:43:18,987 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:43:19,987 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:43:21,581 - trip_search - search_trips - ERROR - No business class for trip: {'aktarmaNo': 0, 'aktarmaSiraNo': 0, 'seyahatTuru': 0, 'trenId': 15046845365, 'trenAdi': 'İSTANBUL-ANKARA', 'trenTipi': 'YHT', 'trenKodu': '81006', 'trenTuruTktId': 49549, 'seferAdi': '81006-02052024', 'seferId': 43307362395, 'binisTarih': 'May 2, 2024 08:32:00 AM', 'inisTarih': 'May 2, 2024 12:29:00 PM', 'vagonTipleriBosYerUcret': [{'vagonTipId': 17002, 'vagonTip': '2+2 Pulman  (Ekonomi)', 'mevkiNo': 0, 'kalanSayi': 10, 'hesapliBiletFiyati': 0, 'standartBiletFiyati': 430.0, 'esnekBiletFiyati': 0, 'vagonListesi': [{'seferTeskilatId': 43307454975, 'seferBaslikId': 43307362395, 'vagonBaslikId': 27948724702, 'vagonSiraNo': 2, 'baslangicIstasyonId': 234519135, 'bitisIstasyonId': 234516259, 'aktif': True, 'baslangicIstasyonAdi': 'İstanbul(Halkalı)', 'bitisIstasyonAdi': 'Ankara Gar', 'bosYer': 0}], 'ubsKodu': 2, 'gosterimArtiUcret': 0, 'kalanEngelliKoltukSayisi': 2, 'kalanYatakSayisi': 0}], 'satisDurum': 1, 'rezDurum': 0, 'binisIstasyonu': 'İstanbul(Pendik)', 'inisIstasyonu': 'Ankara Gar', 'seferGosterimDVO': {'seciliBiletTipi': 0}, 'vagonHaritasindanKoltukSecimi': 1, 'rezUcretOrani': 0, 'rezUcretTutari': 0, 'bolgeselTren': False, 'binisIstasyonId': 234516104, 'inisIstasyonId': 234516259, 'seferVagonListesi': [{'seferTeskilatId': 43307454975, 'seferBaslikId': 43307362395, 'vagonBaslikId': 27948724702, 'vagonSiraNo': 2, 'baslangicIstasyonId': 234519135, 'bitisIstasyonId': 234516259, 'aktif': True, 'baslangicIstasyonAdi': 'İstanbul(Halkalı)', 'bitisIstasyonAdi': 'Ankara Gar', 'bosYer': 0}], 'hesapliBiletIade': False, 'hesapliBiletDegisiklik': False, 'standartBiletIade': True, 'standartBiletDegisiklik': True, 'esnekBiletIade': True, 'esnekBiletDegisiklik': True, 'tersTren': True, 'minimumTasimaUcreti': 55.0, 'gunNotu': '', 'hesapliBiletAcigaCevirme': False, 'standartBiletAcigaCevirme': True, 'esnekBiletAcigaCevirme': True, 'hesapliBiletDegisiklikHakki': 0, 'standartBiletDegisiklikHakki': 3, 'esnekBiletDegisiklikHakki': 3, 'captcha': False, 'durusTablosu': None, 'iliskiTipi': None, 'kirilimOrtakVagonlarDVOs': None, 'bolgeselTrenKalanBiletSayisi': None}
2024-04-24 21:43:21,583 - trip - get_trips - INFO - No trips found.
2024-04-24 21:43:21,583 - trip - find_trip - ERROR - Error while finding trip: 'NoneType' object is not iterable
2024-04-24 21:43:22,583 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:43:24,405 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:48:34,494 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:48:34,494 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:48:35,494 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:48:37,535 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:48:40,284 - trip_search - get_empty_seats_trip - INFO - Length of empty seats: 193
2024-04-24 21:48:40,285 - trip - reserve_seat - INFO - Reserving the seat.
2024-04-24 21:48:42,854 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:48:42,855 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:48:43,855 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:48:45,294 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:48:48,003 - trip_search - get_empty_seats_trip - INFO - Length of empty seats: 192
2024-04-24 21:48:48,004 - trip - reserve_seat - INFO - Reserving the seat.
2024-04-24 21:48:50,246 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:48:50,246 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:48:51,247 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:48:52,634 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:48:55,777 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:48:55,777 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:48:56,778 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:48:58,336 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:49:00,587 - trip - find_trip - INFO - seat_type_id: 17002
2024-04-24 21:49:00,587 - trip - find_trip - INFO - Searching for trips with empty seat.
2024-04-24 21:49:01,588 - trip - get_trips - INFO - Searching for trips.
2024-04-24 21:49:02,817 - trip - get_trips - INFO - Total of 1 trips found
2024-04-24 21:49:05,583 - trip_search - get_empty_seats_trip - INFO - Length of empty seats: 191
2024-04-24 21:49:05,584 - trip - reserve_seat - INFO - Reserving the seat.
2024-04-24 21:49:06,349 - trip - set_seat_lock_id - INFO - koltuk_lock_id_list: [43796056457, 43796056458, 43796056459, 43796056460, 43796056461, 43796056462, 43796056463, 43796056464, 43796056465]
2024-04-24 21:49:06,349 - trip - reserve_seat - INFO - lock_end_time: 2024-04-24 21:59:06
2024-04-24 21:49:06,349 - root - reserve_seat - INFO - empty seat: {'vagonYerlesimId': 27969515133, 'vagonBaslikId': 27948724702, 'nesneTanimId': 13371893753, 'satirNo': 1, 'sutunNo': 24, 'engelliUyarisi': False, 'tekKoltuk': False, 'koltukCinsiyetTipi': None, 'koltukGrupNo': None, 'koltukGrupTipi': None, 'koltukNo': '2c', 'ekHizmetId': None, 'durum': 0, 'hasPermi': False, 'permiYakinlikAck': None, 'vagonSiraNo': 2, 'vagonSutunNo': 0, 'vagonSatirNo': 0, 'seferBaslikId': 43307362395, 'vagonTipId': 17002}
2024-04-24 21:49:06,985 - payment - set_price - INFO - Price response: {'indirimsizToplamUcret': 430.0, 'indirimliToplamUcret': 370.0, 'toplamRezUcreti': 0.0, 'toplamIndirim': 64.5, 'hataMesaji': None, 'biletBiletFiyatlar': [{'siraNo': 1, 'seferBaslikId': 43307362395, 'biletYatakList': None, 'indirimsizUcret': 430.0, 'mevkiFarki': 0, 'abonmanKartinYarattigiToplamIndirim': 0, 'extraServingPrice': 0, 'bedPrice': 0, 'couchettePrice': 0, 'blanketPrice': 0, 'ucret': 370.0, 'roadPrice': 430.0, 'minTasUcretiFarki': 0, 'rezervasyonUcreti': 0.0, 'yolcuToplamUcret': 370.0, 'uyelikSorguSonuc': None, 'permiDetayDVO': None}], 'indirimList': None, 'abonmanBiletTranDVOs': None, 'permininKarsiladiğiKisim': 0}
2024-04-24 21:49:08,349 - payment - process_payment - INFO - response: {'cevapBilgileri': {'cevapKodu': '000', 'cevapMsj': 'İşlem başarılı olarak gerçekleştirildi.', 'detay': None}, 'paymentAuthRequest': {'id': None, 'enReqId': None, 'acsUrl': 'https://3dsecure.vakifbank.com.tr/MPIAPI/Troy_ACS.aspx', 'pareqShort': 'eJyNUttSgz', 'md': '00158cc59331-cdf4-43f4-ae79-2b423250ecda#00158ed31176-38cd-478c-9b2d-7aee75da0653#eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIwMDAwMDAwMDAxMjg5MzQiLCJ0aW1lb3V0U2Vjb25kcyI6NDMyMDAwMDAsInJvbGVzIjoiIiwiZXhwIjoxNzU3MTg0NTQ4fQ.ZSLRk36IE_E-4rrY1--eu9A-JvQ7LgwFhKghRQLY5mHhwLhwilqxdYaqKnAhZcWazmjxzH8-gWLYonf39wXkug#https://goguvenliodeme.bkm.com.tr/troy/approve', 'tarih': 'Apr 24, 2024 09:49:08 PM', 'msgId': '00158ed31176-38cd-478c-9b2d-7aee75da0653', 'pareq': 'eJyNUttSgzAQ/RWGd0i4tEBnG6eWUfHScRQ/ICZri1NCTaG3rzfB1to387RnsznZc3bhalcvnQ3qddWosRv41HVQiUZWaj52u/bDS90rBuVCI+avKDqNDJ5wveZzdCo5dikNBinKKAiSoRelQnpxkgovew+ll3DEZCA5HQ4il8Hz5AW/GBw/Y9SnEZATMqRaLLhqGXDxdV3MWJZkIR0AOUKoURc5o6cThGkWxUB+0qB4jayc5rlTTl6Lp8m0eCwegPRpEE2nWr1nhhHICUCnl2zRtqsRIdvt1q+UajbcF03ttxqIvQVy7uq5s9HasO0qycSt3M8O10rmciXqm2p2uzjw8v4Ty7cxEFsBkrfIQhrGNA5jh2ajOBvRFEifB17bNliUGClG4w+Clf1kcnH1NwXGf23Gs2dZnBklJwS4WzUKTYXR9xsDOfc8vbO+irZ38H8Ts873Dyx7ZQwzSoY9vQVALCU5zpQcV8JEF6vyDZ8zwlQ=', 'termUrl': 'https://3dsecure.vakifbank.com.tr/MPIAPI/MPI_PARes.aspx'}, 'enrollReference': 'kmpeqz9cvubxhd4ngk3yz7ist4pgpsefrowap4qs'}
2024-04-24 21:49:08,350 - payment - process_payment - INFO - Enroll reference: kmpeqz9cvubxhd4ngk3yz7ist4pgpsefrowap4qs
2024-04-24 21:49:08,350 - payment - process_payment - INFO - ACS URL: https://3dsecure.vakifbank.com.tr/MPIAPI/Troy_ACS.aspx
2024-04-24 21:49:08,350 - payment - process_payment - INFO - Sending payment request: {'PaReq': 'eJyNUttSgzAQ/RWGd0i4tEBnG6eWUfHScRQ/ICZri1NCTaG3rzfB1to387RnsznZc3bhalcvnQ3qddWosRv41HVQiUZWaj52u/bDS90rBuVCI+avKDqNDJ5wveZzdCo5dikNBinKKAiSoRelQnpxkgovew+ll3DEZCA5HQ4il8Hz5AW/GBw/Y9SnEZATMqRaLLhqGXDxdV3MWJZkIR0AOUKoURc5o6cThGkWxUB+0qB4jayc5rlTTl6Lp8m0eCwegPRpEE2nWr1nhhHICUCnl2zRtqsRIdvt1q+UajbcF03ttxqIvQVy7uq5s9HasO0qycSt3M8O10rmciXqm2p2uzjw8v4Ty7cxEFsBkrfIQhrGNA5jh2ajOBvRFEifB17bNliUGClG4w+Clf1kcnH1NwXGf23Gs2dZnBklJwS4WzUKTYXR9xsDOfc8vbO+irZ38H8Ts873Dyx7ZQwzSoY9vQVALCU5zpQcV8JEF6vyDZ8zwlQ=', 'MD': '00158cc59331-cdf4-43f4-ae79-2b423250ecda#00158ed31176-38cd-478c-9b2d-7aee75da0653#eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIwMDAwMDAwMDAxMjg5MzQiLCJ0aW1lb3V0U2Vjb25kcyI6NDMyMDAwMDAsInJvbGVzIjoiIiwiZXhwIjoxNzU3MTg0NTQ4fQ.ZSLRk36IE_E-4rrY1--eu9A-JvQ7LgwFhKghRQLY5mHhwLhwilqxdYaqKnAhZcWazmjxzH8-gWLYonf39wXkug#https://goguvenliodeme.bkm.com.tr/troy/approve', 'TermUrl': 'https://3dsecure.vakifbank.com.tr/MPIAPI/MPI_PARes.aspx'}
2024-04-24 21:49:08,350 - payment - process_payment - INFO - Base URL: https://ebilet.tcddtasimacilik.gov.tr/view/eybis/tnmGenel/tcdd3dsecure/3dsecure.html?url=https://3dsecure.vakifbank.com.tr/MPIAPI/Troy_ACS.aspx&md=00158cc59331-cdf4-43f4-ae79-2b423250ecda%2300158ed31176-38cd-478c-9b2d-7aee75da0653%23eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIwMDAwMDAwMDAxMjg5MzQiLCJ0aW1lb3V0U2Vjb25kcyI6NDMyMDAwMDAsInJvbGVzIjoiIiwiZXhwIjoxNzU3MTg0NTQ4fQ.ZSLRk36IE_E-4rrY1--eu9A-JvQ7LgwFhKghRQLY5mHhwLhwilqxdYaqKnAhZcWazmjxzH8-gWLYonf39wXkug%23https://goguvenliodeme.bkm.com.tr/troy/approve&pareq=eJyNUttSgzAQ/RWGd0i4tEBnG6eWUfHScRQ/ICZri1NCTaG3rzfB1to387RnsznZc3bhalcvnQ3qddWosRv41HVQiUZWaj52u/bDS90rBuVCI+avKDqNDJ5wveZzdCo5dikNBinKKAiSoRelQnpxkgovew+ll3DEZCA5HQ4il8Hz5AW/GBw/Y9SnEZATMqRaLLhqGXDxdV3MWJZkIR0AOUKoURc5o6cThGkWxUB+0qB4jayc5rlTTl6Lp8m0eCwegPRpEE2nWr1nhhHICUCnl2zRtqsRIdvt1q+UajbcF03ttxqIvQVy7uq5s9HasO0qycSt3M8O10rmciXqm2p2uzjw8v4Ty7cxEFsBkrfIQhrGNA5jh2ajOBvRFEifB17bNliUGClG4w+Clf1kcnH1NwXGf23Gs2dZnBklJwS4WzUKTYXR9xsDOfc8vbO+irZ38H8Ts873Dyx7ZQwzSoY9vQVALCU5zpQcV8JEF6vyDZ8zwlQ=&termurl=https://3dsecure.vakifbank.com.tr/MPIAPI/MPI_PARes.aspx
2024-04-24 21:49:09,462 - payment - process_payment - INFO - Payment Page loaded.
2024-04-24 21:49:19,694 - payment - process_payment - ERROR - OTP input field or submit button not found.
2024-04-24 21:50:04,705 - payment - process_payment - INFO - Page redirected to bilet.tcdd.gov.tr
2024-04-24 21:50:04,705 - payment - process_payment - INFO - Checking if payment was successfull.
2024-04-24 21:50:04,705 - payment - set_is_payment_success - INFO - Sending odeme sorgu request: {'kanalKodu': '3', 'dil': 0, 'enrollReference': 'kmpeqz9cvubxhd4ngk3yz7ist4pgpsefrowap4qs'}
2024-04-24 21:50:05,132 - payment - set_is_payment_success - INFO - Response: 3cuybw8lx74hitmejs4s8vm044xldxkewjxeihuj
2024-04-24 21:50:05,133 - payment - process_payment - INFO - Payment was successful.
2024-04-24 21:50:05,134 - payment - ticket_reservation - INFO - Ticket reservation request: {'kanalKodu': '3', 'dil': 0, 'islemTipi': 0, 'biletRezYerBilgileri': [{'biletWSDVO': {'seferBaslikId': 43307362395, 'aktarmaSiraNo': '0', 'binisIstasyonId': 234516104, 'inisIstasyonId': 234516259, 'hareketTarihi': 'May 2, 2024 08:32:00 AM', 'varisTarihi': 'May 2, 2024 12:29:00 PM', 'biletTipi': 1, 'maliyeNo': 0, 'grupMu': False, 'cezali': False, 'farkBileti': False, 'bagajBileti': False, 'hesCode': '', 'yolcuSiraNo': 1, 'tarifeId': 11750067704, 'vagonSiraNo': 2, 'koltukNo': '2c', 'ucret': 370, 'tckn': '18700774442', 'ad': 'izzet can', 'soyad': 'karakuş', 'dogumTar': 'Jul 14, 1994 03:00:00 AM', 'iletisimEposta': 'izzetcankarakus@gmail.com', 'iletisimCepTel': '05340771521', 'cinsiyet': 'E', 'trenTurTktId': 49549, 'koltukBazUcret': 430, 'indirimsizUcret': 430, 'statu': 0, 'seyahatTur': 2, 'vagonTipi': 0, 'minimumTasimaUcretiFarki': 0}}], 'biletRezOdemeBilgileri': {'vposReference': '3cuybw8lx74hitmejs4s8vm044xldxkewjxeihuj', 'krediKartSahibiAdSoyad': 'izzet can karakuş', 'krediKartNO': '4506347008156065', 'toplamBiletTutari': 370, 'krediKartiTutari': 370, 'abonmanTutar': 0, 'acikBiletTutar': 0, 'islemYeri': '7', 'milPuan': 0, 'permiDetayList': [], 'krediKartNo': '4506347008156065'}, 'koltukLockIdList': [43796056457, 43796056458, 43796056459, 43796056460, 43796056461, 43796056462, 43796056463, 43796056464, 43796056465]}
2024-04-24 21:50:10,039 - payment - ticket_reservation - INFO - Ticket reservation successful.
